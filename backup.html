<!DOCTYPE html>
<html lang="en">
<head>
<meta name="google-site-verification" content="lEJqM5jKwoWplwhVu_EZRgJ_wvvVjM_1pUyMZK-zO48" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DE Education</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sinhala:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics-compat.js"></script>
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    <style>
        /* Updated color scheme: Dark grey and yellow-green */
        :root {
            --primary-dark: #2d3748;
            --primary-darker: #1a202c;
            --primary-light: #4a5568;
            --accent-color: #9acd32; /* Yellow-green */
            --accent-light: #b8e986;
            --accent-dark: #7aa300;
            --text-light: #f7fafc;
            --text-dark: #2d3748;
            --bg-light: #f8f9fa;
            --bg-dark: #1a202c;
        }
        
        @media (max-width: 768px) {
            .mobile-menu {
                display: none;
            }
            .mobile-menu.active {
                display: block;
            }
        }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--bg-light) 0%, #edf2f7 100%);
            color: var(--text-dark);
        }
        .sinhala { font-family: 'Noto Sinhala', sans-serif; }
        .gradient-header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-darker) 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .marquee-container {
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            box-sizing: border-box;
            background-color: #fff9db;
            padding: 0.5rem 0;
            border-radius: 0.5rem;
            border: 1px solid var(--accent-color);
        }
        .marquee-text {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 30s linear infinite;
            color: var(--accent-dark);
            font-weight: 500;
        }
        @keyframes marquee {
            0%   { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        .countdown-container {
            margin-top: 1.5rem;
            background: linear-gradient(135deg, #f0f4ff 0%, #e6eeff 100%);
            padding: 1.5rem;
            border-radius: 0.75rem;
            border: 2px solid var(--accent-color);
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .countdown-title {
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-size: 1.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 1rem;
            font-size: 2rem;
            color: var(--primary-dark);
            font-family: 'Inter', sans-serif;
            font-weight: 800;
        }

        
        .countdown-item {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: transparent !important;
    padding: 0.5rem !important;
    min-width: 100px !important;
    box-shadow: none !important;
    border: none !important;
}

.circle {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    font-weight: bold;
    color: var(--primary-dark);
    margin-bottom: 0.5rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    border: 2px solid var(--accent-light);
}

.circle svg {
    position: absolute;
    top: 0;
    left: 0;
    transform: rotate(-90deg);
}

.circle circle {
    fill: none;
    stroke-width: 8;
    stroke-linecap: round;
    stroke: var(--accent-color);
    stroke-dasharray: 283;
    stroke-dashoffset: 283;
    transition: stroke-dashoffset 1s linear;
}

.countdown-item span:last-child {
    display: block;
    font-size: 0.9rem;
    color: var(--primary-dark);
    margin-top: 0.4rem;
    text-transform: uppercase;
    font-weight: 600;
    letter-spacing: 0.5px;
}
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tab-content.active {
            display: block;
        }
        #backToTopBtn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 30px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: var(--primary-dark);
            color: white;
            cursor: pointer;
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, transform 0.3s;
        }
        #backToTopBtn:hover {
            background-color: var(--primary-darker);
            transform: translateY(-2px);
        }
        .login-container {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .google-btn {
            background: white;
            color: #4285F4;
            border: 1px solid #e2e8f0;
        }
        .google-btn:hover {
            background: #f8fafc;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .contact-icon-wrapper {
            background-color: #f0f4ff;
            color: var(--primary-dark);
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        .contact-icon-wrapper:hover {
            transform: scale(1.1);
            background-color: var(--accent-light);
        }
        .paper-item {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .paper-item:hover {
            background-color: #f0f4ff;
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        }
        /* New styles for stream selection */
        .stream-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .stream-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .stream-card.active {
            border: 2px solid var(--accent-color);
            background-color: #f8f9fa;
        }
        .subject-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }
        .subject-list.open {
            max-height: 500px;
        }
        /* NEW STYLES - REPLACE THE OLD ONES */
.timetable-calendar {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 0.75rem;
    text-align: center;
}
.calendar-day {
    background-color: #fff;
    padding: 0.75rem 0.5rem;
    border-radius: 0.5rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    transition: all 0.2s ease;
    cursor: pointer;
    min-height: 80px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.calendar-day .text-sm {
    font-size: 0.7rem;
    margin-bottom: 0.25rem;
}
.calendar-day .text-2xl {
    font-size: 1.5rem;
    font-weight: bold;
    line-height: 1.2;
}
        
.calendar-day.exam-day {
    border: 2px solid;
    background-color: var(--primary-dark);
    color: white;
    font-weight: bold;
}
.calendar-day.exam-day.general-stream {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
    color: var(--primary-dark);
}

        .calendar-day.active-day {
            background-color: var(--accent-color);
            color: var(--primary-dark);
            border: 2px solid var(--accent-dark);
        }
        .calendar-day:hover:not(.active-day) {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .calendar-day .text-sm {
            font-size: 0.6rem;
        }
        .calendar-day .text-2xl {
            font-size: 1.25rem;
        }
        .exam-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .exam-details.open {
            max-height: 1000px;
        }
        .timetable-container {
            min-height: 500px;
        }

        /* Stream Colors for calendar */
        .calendar-day.science-stream { border-color: #2563eb; }
        .calendar-day.commerce-stream { border-color: #16a34a; }
        .calendar-day.arts-stream { border-color: #9333ea; }
        .calendar-day.technology-stream { border-color: #dc2626; }
        .calendar-day.general-stream { border-color: var(--accent-color); }

        .notice-item {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .notice-item:hover {
            background-color: #f8f9fa;
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        }
        
        /* New animations */
        .pulse-slow {
            animation: pulse 3s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .slide-in-left {
            animation: slideInLeft 0.5s ease-out;
        }
        
        @keyframes slideInLeft {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .slide-in-right {
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .bounce-subtle {
            animation: bounceSubtle 2s infinite;
        }
        
        @keyframes bounceSubtle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* Button animations */
        .btn-animate {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-animate:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .btn-animate:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Login Modal (Shown First) -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="login-container rounded-xl overflow-hidden card-hover w-full max-w-md animate__animated animate__fadeInUp">
            <div class="p-8">
                <h2 class="text-2xl font-bold mb-6 text-center text-gray-800 bg-gray-50 py-3 px-4 rounded-lg">Login to Continue</h2>
                
                <!-- Centered hCaptcha -->
                <div style="display: flex; justify-content: center; margin-bottom: 16px;">
                    <div class="h-captcha" data-sitekey="2b2071d4-7eba-4f22-a38a-f36e34ca9ba6"></div>
                </div>

                <!-- Enhanced Google Login Button -->
                <button onclick="googleLogin()" class="w-full flex items-center justify-center google-btn px-6 py-3 rounded-lg font-medium transition-colors mb-4 hover:shadow-md btn-animate">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" viewBox="0 0 24 24">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                    </svg>
                    <span id="googleLoginText" class="font-medium">Login with Google</span>
                </button>

                <!-- Language Toggle Button -->
                <div class="flex justify-center mt-4">
                    <button onclick="toggleLanguage()" class="text-sm text-gray-600 hover:text-gray-800 transition-colors btn-animate">
                        <span id="languageToggleText">සිංහලට මාරු වන්න</span>
                    </button>
                </div>

                <!-- Status Message -->
                <p id="status" class="text-sm text-center mt-6 text-red-600"></p>

                <!-- Footer Note -->
                <p class="text-center text-gray-500 text-sm mt-8">
                    By logging in, you agree to our Terms of Service and Privacy Policy
                </p>
            </div>
        </div>
    </div>

    <!-- Main Content (Hidden until login) -->
    <div id="mainContent" class="hidden">
        <!-- Header Section -->
        <header class="gradient-header text-white shadow-lg">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <button id="mobileMenuButton" class="md:hidden text-white mr-4 btn-animate">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                            </svg>
                        </button>
                        <div class="slide-in-left">
                            <h1 class="text-2xl md:text-3xl font-bold" id="headerTitle">DE Education.lk</h1>
                            <p class="mt-1 text-gray-300 text-sm" id="headerSubtitle">Complete Educational Resource Platform</p>
                        </div>
                    </div>
                    <button id="langToggle" class="bg-gray-700 hover:bg-gray-800 px-4 py-2 rounded-md text-sm font-medium transition-colors btn-animate">
                        සිංහල
                    </button>
                </div>
                
                <!-- Mobile Menu -->
                <div id="mobileMenu" class="mobile-menu mt-4 md:hidden">
                    <div class="flex flex-col space-y-2">
                        <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="home">Home</a>
                        <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="papers">Past Papers</a>
                        <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="results">Exam Results</a>
                        <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="timetables">Time Tables</a>
                        <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="ethaksalawa">E-Thaksalawa</a>
                        <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="notices">Notices</a>
                        <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="contact">Contact</a>
                        <button onclick="logout()" class="text-left text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate">Logout</button>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex space-x-4 mt-4">
                    <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="home">Home</a>
                    <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="papers">Past Papers</a>
                    <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="results">Exam Results</a>
                    <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="timetables">Time Tables</a>
                    <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="ethaksalawa">E-Thaksalawa</a>
                    <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="notices">Notices</a>
                    <a href="#" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate" data-tab="contact">Contact</a>
                    <button onclick="logout()" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-700 btn-animate">Logout</button>
                </nav>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="flex-grow container mx-auto px-4 py-8">
            <!-- Home Tab -->
            <div id="home" class="tab-content active">
                <div class="animate__animated animate__fadeIn">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">Welcome to DE Education.lk</h2>
                    
                    <!-- Search Bar -->
                    <div class="mb-8">
                        <div class="flex justify-center max-w-2xl mx-auto rounded-lg overflow-hidden shadow-lg">
                            <input type="text" id="globalSearch" placeholder="Search resources, papers, notices..." 
                                   class="w-full p-3 md:p-4 border-none focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800 text-base md:text-lg">
                            <button onclick="globalSearch()" class="bg-gray-700 hover:bg-gray-800 text-white px-6 py-3 md:py-4 font-medium transition-colors flex items-center justify-center btn-animate">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                </svg>
                                <span>Search</span>
                            </button>
                        </div>
                    </div>

                    <!-- Urgent Message Marquee -->
                    <div class="marquee-container mb-8">
                        <p class="marquee-text" id="urgentMessage">All subjects are not yet added. Please try again after the update. The next update will be released on 2025.09.21.</p>
                    </div>

                   <!-- Countdown Timer -->
<div class="countdown-container mb-8">
    <h3 class="countdown-title">2025 A/L Start Countdown</h3>
    <div class="countdown-timer">
        <div class="countdown-item">
            <div class="circle">
                <svg width="100" height="100">
                    <circle cx="50" cy="50" r="45"></circle>
                </svg>
                <span id="days">00</span>
            </div>
            <span>Days</span>
        </div>
        <div class="countdown-item">
            <div class="circle">
                <svg width="100" height="100">
                    <circle cx="50" cy="50" r="45"></circle>
                </svg>
                <span id="hours">00</span>
            </div>
            <span>Hours</span>
        </div>
        <div class="countdown-item">
            <div class="circle">
                <svg width="100" height="100">
                    <circle cx="50" cy="50" r="45"></circle>
                </svg>
                <span id="minutes">00</span>
            </div>
            <span>Minutes</span>
        </div>
        <div class="countdown-item">
            <div class="circle">
                <svg width="100" height="100">
                    <circle cx="50" cy="50" r="45"></circle>
                </svg>
                <span id="seconds">00</span>
            </div>
            <span>Seconds</span>
        </div>
    </div>
</div>

                    <!-- Quick Access Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-xl shadow-md card-hover text-center bounce-subtle">
                            <div class="bg-blue-100 p-3 rounded-full inline-flex items-center justify-center mb-4">
                                <i class="fas fa-file-pdf text-blue-600 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">Past Papers</h3>
                            <p class="text-gray-600 mb-4">Access A/L past papers and marking schemes</p>
                            <a href="#" data-tab="papers" class="text-blue-600 hover:text-blue-800 font-medium">View Papers →</a>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-md card-hover text-center bounce-subtle" style="animation-delay: 0.1s;">
                            <div class="bg-green-100 p-3 rounded-full inline-flex items-center justify-center mb-4">
                                <i class="fas fa-chart-line text-green-600 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">Exam Results</h3>
                            <p class="text-gray-600 mb-4">Check latest examination results</p>
                            <a href="#" data-tab="results" class="text-green-600 hover:text-green-800 font-medium">Check Results →</a>
                        </div>
                        
                        <div class="bg-white p-6 rounded-xl shadow-md card-hover text-center bounce-subtle" style="animation-delay: 0.2s;">
                            <div class="bg-yellow-100 p-3 rounded-full inline-flex items-center justify-center mb-4">
                                <i class="fas fa-calendar-alt text-yellow-600 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">Time Tables</h3>
                            <p class="text-gray-600 mb-4">View and search examination timetables</p>
                            <a href="#" data-tab="timetables" class="text-yellow-600 hover:text-yellow-800 font-medium">View Timetables →</a>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-md card-hover text-center bounce-subtle" style="animation-delay: 0.3s;">
                            <div class="bg-red-100 p-3 rounded-full inline-flex items-center justify-center mb-4">
                                <i class="fas fa-bullhorn text-red-600 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">Notices</h3>
                            <p class="text-gray-600 mb-4">Latest announcements and notices</p>
                            <a href="#" data-tab="notices" class="text-red-600 hover:text-red-800 font-medium">View Notices →</a>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-md slide-in-right">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Recent Updates</h3>
                        <div class="space-y-4">
                            <div class="flex items-start">
                                <div class="bg-gray-200 p-2 rounded-full mr-4">
                                    <i class="fas fa-plus-circle text-gray-700"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800">New Engineering Technology Papers Added</h4>
                                    <p class="text-gray-600 text-sm">2020-2023 past papers and marking schemes now available</p>
                                    <p class="text-gray-500 text-xs">Posted on: 2025-08-15</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-blue-100 p-2 rounded-full mr-4">
                                    <i class="fas fa-bullhorn text-blue-600"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800">2025 A/L Examination Schedule Released</h4>
                                    <p class="text-gray-600 text-sm">Official examination dates published by the Department of Examinations</p>
                                    <p class="text-gray-500 text-xs">Posted on: 2025-08-10</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-purple-100 p-2 rounded-full mr-4">
                                    <i class="fas fa-book text-purple-600"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800">New Quiz Feature Available</h4>
                                    <p class="text-gray-600 text-sm">Test your knowledge with subject-specific quizzes</p>
                                    <p class="text-gray-500 text-xs">Posted on: 2025-08-05</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timetables Tab (NEW) -->
            <div id="timetables" class="tab-content">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">2025 A/L Timetable</h2>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Official Timetable PDF</h3>
                        <div class="flex flex-col md:flex-row items-center justify-between mb-4">
                            <p class="text-gray-600 mb-2 md:mb-0">You can view the official timetable or download the PDF for offline access.</p>
                            <a href="https://www.doenets.lk/images/resources/NEWS/AL%20Time%20Table%202025_1755235352612.pdf" download class="inline-flex items-center bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded-lg font-medium transition-colors btn-animate">
                                <i class="fas fa-download mr-2"></i> Download PDF
                            </a>
                        </div>

                    </div>
                    
                    <hr class="my-8 border-gray-200">

                    <div class="mb-6 mt-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Interactive Timetable</h3>
                        <p class="text-gray-600 mb-4">Click a date with a colored border to see the examinations for that day. The color indicates the subject stream.</p>
                        <div class="mb-4 flex flex-col sm:flex-row gap-4">
                            <input type="text" id="timetableSearch" placeholder="Search by subject name..." 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800">
                            <button onclick="copyTimetableToClipboard()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap btn-animate">
                                <i class="fas fa-share-alt mr-2"></i> Copy Timetable
                            </button>
                            <button onclick="downloadTimetableAsText()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap btn-animate">
                                <i class="fas fa-file-download mr-2"></i> Download as .txt
                            </button>
                        </div>
                        <div class="timetable-calendar" id="timetableCalendar">
                            <!-- Calendar days will be populated here -->
                        </div>
                        <div class="mt-8 timetable-container" id="timetableDetails">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4" id="timetableDayTitle">Select a date to view exams.</h4>
                            <div class="space-y-4" id="examDetailsList">
                                <!-- Exam details will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Past Papers Tab -->
            <div id="papers" class="tab-content">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">Past Papers</h2>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Select Stream</h3>
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                            <div class="stream-card bg-gray-100 p-4 rounded-lg text-center cursor-pointer" data-stream="science">
                                <i class="fas fa-flask text-2xl mb-2 text-blue-600"></i>
                                <p class="font-medium">Science</p>
                            </div>
                            <div class="stream-card bg-gray-100 p-4 rounded-lg text-center cursor-pointer" data-stream="commerce">
                                <i class="fas fa-chart-bar text-2xl mb-2 text-green-600"></i>
                                <p class="font-medium">Commerce</p>
                            </div>
                            <div class="stream-card bg-gray-100 p-4 rounded-lg text-center cursor-pointer" data-stream="arts">
                                <i class="fas fa-palette text-2xl mb-2 text-purple-600"></i>
                                <p class="font-medium">Arts</p>
                            </div>
                            <div class="stream-card bg-gray-100 p-4 rounded-lg text-center cursor-pointer" data-stream="technology">
                                <i class="fas fa-cogs text-2xl mb-2 text-red-600"></i>
                                <p class="font-medium">Technology</p>
                            </div>
                            <div class="stream-card bg-gray-100 p-4 rounded-lg text-center cursor-pointer" data-stream="general">
                                <i class="fas fa-book text-2xl mb-2 text-yellow-600"></i>
                                <p class="font-medium">General</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Select Subject</h3>
                        <div class="subject-list" id="subjectList">
                            <!-- Subjects will be populated here based on stream selection -->
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Select Year</h3>
                        <div class="flex flex-wrap gap-2" id="yearList">
                            <!-- Years will be populated here based on subject selection -->
                        </div>
                    </div>
                    
                    <div class="mt-8" id="paperList">
                        <!-- Papers will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Exam Results Tab -->
            <div id="results" class="tab-content">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">Exam Results</h2>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Check Results</h3>
                        <p class="text-gray-600 mb-4">Enter your examination details to check your results.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-gray-700 mb-2" for="examType">Exam Type</label>
                                <select id="examType" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800">
                                    <option value="">Select Exam Type</option>
                                    <option value="al">G.C.E. Advanced Level</option>
                                    <option value="ol">G.C.E. Ordinary Level</option>
                                    <option value="grade5">Grade 5 Scholarship</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2" for="examYear">Exam Year</label>
                                <select id="examYear" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800">
                                    <option value="">Select Year</option>
                                    <option value="2025">2025</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                    <option value="2022">2022</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-gray-700 mb-2" for="indexNumber">Index Number</label>
                                <input type="text" id="indexNumber" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800" placeholder="Enter your index number">
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2" for="nicNumber">NIC Number</label>
                                <input type="text" id="nicNumber" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800" placeholder="Enter your NIC number">
                            </div>
                        </div>
                        
                        <button onclick="checkResults()" class="bg-gray-700 hover:bg-gray-800 text-white px-6 py-3 rounded-lg font-medium transition-colors btn-animate">
                            Check Results
                        </button>
                    </div>
                    
                    <div class="mt-8" id="resultsDisplay">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- E-Thaksalawa Tab -->
            <div id="ethaksalawa" class="tab-content">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">E-Thaksalawa Resources</h2>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Access E-Thaksalawa Resources</h3>
                        <p class="text-gray-600 mb-4">E-Thaksalawa is the national e-learning portal of Sri Lanka. Access a wide range of educational resources.</p>
                        
                        <div class="bg-blue-50 p-4 rounded-lg mb-6">
                            <p class="text-blue-800"><i class="fas fa-info-circle mr-2"></i> You will be redirected to the official E-Thaksalawa website.</p>
                        </div>
                        
                        <div class="flex flex-col md:flex-row gap-4">
                            <a href="https://www.e-thaksalawa.moe.gov.lk" target="_blank" class="inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors btn-animate">
                                <i class="fas fa-external-link-alt mr-2"></i> Visit E-Thaksalawa
                            </a>
                            <a href="https://www.e-thaksalawa.moe.gov.lk/si/" target="_blank" class="inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors btn-animate">
                                <i class="fas fa-book mr-2"></i> Sinhala Medium
                            </a>
                            <a href="https://www.e-thaksalawa.moe.gov.lk/ta/" target="_blank" class="inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors btn-animate">
                                <i class="fas fa-book mr-2"></i> Tamil Medium
                            </a>
                            <a href="https://www.e-thaksalawa.moe.gov.lk/en/" target="_blank" class="inline-flex items-center justify-center bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium transition-colors btn-animate">
                                <i class="fas fa-book mr-2"></i> English Medium
                            </a>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Popular Resources</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-2">Grade 10-11 Resources</h4>
                                <p class="text-gray-600 text-sm mb-3">Study materials for GCE O/L students</p>
                                <a href="https://www.e-thaksalawa.moe.gov.lk/si/category/198" target="_blank" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Access Resources →</a>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-2">Grade 12-13 Resources</h4>
                                <p class="text-gray-600 text-sm mb-3">Study materials for GCE A/L students</p>
                                <a href="https://www.e-thaksalawa.moe.gov.lk/si/category/199" target="_blank" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Access Resources →</a>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium text-gray-800 mb-2">Video Lessons</h4>
                                <p class="text-gray-600 text-sm mb-3">Educational videos for all subjects</p>
                                <a href="https://www.e-thaksalawa.moe.gov.lk/si/category/200" target="_blank" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Watch Videos →</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notices Tab -->
            <div id="notices" class="tab-content">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">Notices & Announcements</h2>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Latest Notices</h3>
                        <div class="space-y-4" id="noticesList">
                            <!-- Notices will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Tab -->
            <div id="contact" class="tab-content">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">Contact Us</h2>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">Get in Touch</h3>
                            <p class="text-gray-600 mb-6">Have questions or feedback? We'd love to hear from you. Send us a message and we'll respond as soon as possible.</p>
                            
                            <div class="space-y-4">
                                <div class="flex items-center">
                                    <div class="contact-icon-wrapper p-3 rounded-full mr-4">
                                        <i class="fas fa-envelope text-gray-700"></i>
                                    </div>
                                    <div>
                                        <p class="text-gray-600">Email</p>
                                        <p class="font-medium">info@deeducation.lk</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <div class="contact-icon-wrapper p-3 rounded-full mr-4">
                                        <i class="fas fa-phone text-gray-700"></i>
                                    </div>
                                    <div>
                                        <p class="text-gray-600">Phone</p>
                                        <p class="font-medium">+94 11 234 5678</p>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <div class="contact-icon-wrapper p-3 rounded-full mr-4">
                                        <i class="fas fa-map-marker-alt text-gray-700"></i>
                                    </div>
                                    <div>
                                        <p class="text-gray-600">Address</p>
                                        <p class="font-medium">123 Education Street, Colombo, Sri Lanka</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">Send Message</h3>
                            <form id="contactForm">
                                <div class="mb-4">
                                    <label class="block text-gray-700 mb-2" for="name">Your Name</label>
                                    <input type="text" id="name" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800" required>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-gray-700 mb-2" for="email">Email Address</label>
                                    <input type="email" id="email" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800" required>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-gray-700 mb-2" for="subject">Subject</label>
                                    <input type="text" id="subject" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800" required>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-gray-700 mb-2" for="message">Message</label>
                                    <textarea id="message" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 text-gray-800" required></textarea>
                                </div>
                                <button type="submit" class="bg-gray-700 hover:bg-gray-800 text-white px-6 py-3 rounded-lg font-medium transition-colors w-full btn-animate">
                                    Send Message
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="gradient-header text-white py-8 mt-auto">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4">DE Education.lk</h3>
                        <p class="text-gray-300">Your complete educational resource platform for Sri Lankan students. Providing past papers, exam results, timetables and more.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4">Quick Links</h3>
                        <ul class="space-y-2">
                            <li><a href="#" data-tab="home" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                            <li><a href="#" data-tab="papers" class="text-gray-300 hover:text-white transition-colors">Past Papers</a></li>
                            <li><a href="#" data-tab="results" class="text-gray-300 hover:text-white transition-colors">Exam Results</a></li>
                            <li><a href="#" data-tab="timetables" class="text-gray-300 hover:text-white transition-colors">Time Tables</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4">Connect With Us</h3>
                        <div class="flex space-x-4">
                            <a href="#" class="text-gray-300 hover:text-white transition-colors">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                    <p>&copy; 2025 DE Education.lk. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTopBtn" class="btn-animate">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC3Q8qJj3Q4Q5Q6Q7Q8Q9Q0Q1Q2Q3Q4Q5Q6Q",
            authDomain: "de-education-lk.firebaseapp.com",
            projectId: "de-education-lk",
            storageBucket: "de-education-lk.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdefghijklmnopqrstuv",
            measurementId: "G-ABCDEFGHIJ"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();

        // Initialize EmailJS
        emailjs.init("user_your_user_id_here");

        // Language state
        let isSinhala = false;

        // Toggle language function
        function toggleLanguage() {
            isSinhala = !isSinhala;
            updateLanguage();
        }

        // Update all text based on language
        function updateLanguage() {
            const elements = {
                'headerTitle': { en: 'DE Education.lk', si: 'DE Education.lk' },
                'headerSubtitle': { en: 'Complete Educational Resource Platform', si: 'සම්පූර්ණ අධ්‍යාපන සම්පත් වේදිකාව' },
                'languageToggleText': { en: 'සිංහලට මාරු වන්න', si: 'Switch to English' },
                'googleLoginText': { en: 'Login with Google', si: 'ගූගල් සමඟ ප්‍රවේශ වන්න' },
                'urgentMessage': { en: 'All subjects are not yet added. Please try again after the update. The next update will be released on 2025.09.21.', si: 'සියලුම විෂයයන් තවමත් එකතු කර නොමැත. යාවත්කාලීන කිරීමෙන් පසු නැවත උත්සාහ කරන්න. ඊළඟ යාවත්කාලීන කිරීම 2025.09.21 දින නිකුත් කෙරේ.' }
            };

            for (const [id, texts] of Object.entries(elements)) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = isSinhala ? texts.si : texts.en;
                }
            }

            // Update navigation
            const navItems = document.querySelectorAll('nav a, .mobile-menu a');
            const navTexts = {
                'home': { en: 'Home', si: 'මුල් පිටුව' },
                'papers': { en: 'Past Papers', si: 'පසුගිය ප්‍රශ්න පත්‍ර' },
                'results': { en: 'Exam Results', si: 'තරගාවලි ප්‍රතිපල' },
                'timetables': { en: 'Time Tables', si: 'කාලසටහන්' },
                'ethaksalawa': { en: 'E-Thaksalawa', si: 'ඊ-තක්සලාව' },
                'notices': { en: 'Notices', si: 'නිවේදන' },
                'contact': { en: 'Contact', si: 'සම්බන්ධ වන්න' }
            };

            navItems.forEach(item => {
                const tab = item.getAttribute('data-tab');
                if (tab && navTexts[tab]) {
                    item.textContent = isSinhala ? navTexts[tab].si : navTexts[tab].en;
                }
            });

            // Update tab titles
            const tabContents = document.querySelectorAll('.tab-content');
            const tabTitles = {
                'home': { en: 'Welcome to DE Education.lk', si: 'DE Education.lk වෙත සාදරයෙන් පිළිගනිමු' },
                'papers': { en: 'Past Papers', si: 'පසුගිය ප්‍රශ්න පත්‍ර' },
                'results': { en: 'Exam Results', si: 'තරගාවලි ප්‍රතිපල' },
                'timetables': { en: '2025 A/L Timetable', si: '2025 A/L කාලසටහන' },
                'ethaksalawa': { en: 'E-Thaksalawa Resources', si: 'ඊ-තක්සලාව සම්පත්' },
                'notices': { en: 'Notices & Announcements', si: 'නිවේදන සහ ප්‍රකාශන' },
                'contact': { en: 'Contact Us', si: 'අපව සම්බන්ධ කර ගන්න' }
            };

            tabContents.forEach(tab => {
                const id = tab.id;
                if (tabTitles[id]) {
                    const titleElement = tab.querySelector('h2');
                    if (titleElement) {
                        titleElement.textContent = isSinhala ? tabTitles[id].si : tabTitles[id].en;
                    }
                }
            });

            // Update other UI elements
            const otherTexts = {
                'globalSearch': { en: 'Search resources, papers, notices...', si: 'සම්පත්, ප්‍රශ්න පත්‍ර, නිවේදන සොයන්න...' },
                'countdownTitle': { en: '2025 A/L Start Countdown', si: '2025 A/L ආරම්භයට ඉතිරි කාලය' }
            };

            for (const [id, texts] of Object.entries(otherTexts)) {
                const element = document.getElementById(id);
                if (element) {
                    element.placeholder = isSinhala ? texts.si : texts.en;
                }
            }

            const countdownTitle = document.querySelector('.countdown-title');
            if (countdownTitle) {
                countdownTitle.textContent = isSinhala ? '2025 A/L ආරම්භයට ඉතිරි කාලය' : '2025 A/L Start Countdown';
            }
        }

        // Google Login Function
        function googleLogin() {
            const provider = new firebase.auth.GoogleAuthProvider();
            
            // Verify hCaptcha first
            const hcaptchaResponse = hcaptcha.getResponse();
            if (!hcaptchaResponse) {
                document.getElementById('status').textContent = 'Please complete the captcha verification.';
                return;
            }

            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    // User signed in successfully
                    document.getElementById('loginModal').classList.add('hidden');
                    document.getElementById('mainContent').classList.remove('hidden');
                    
                    // Log the login event to analytics
                    firebase.analytics().logEvent('login', {
                        method: 'Google'
                    });
                })
                .catch((error) => {
                    // Handle errors
                    console.error('Login error:', error);
                    document.getElementById('status').textContent = 'Login failed. Please try again.';
                });
        }

        // Logout Function
        function logout() {
            firebase.auth().signOut().then(() => {
                document.getElementById('loginModal').classList.remove('hidden');
                document.getElementById('mainContent').classList.add('hidden');
            });
        }

        // Tab Navigation
        document.querySelectorAll('a[data-tab]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const tabId = link.getAttribute('data-tab');
                
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Show selected tab content
                document.getElementById(tabId).classList.add('active');
                
                // Update active navigation state
                document.querySelectorAll('nav a, .mobile-menu a').forEach(navLink => {
                    navLink.classList.remove('bg-gray-700');
                });
                link.classList.add('bg-gray-700');
                
                // If on mobile, close the menu after selection
                if (window.innerWidth < 768) {
                    document.getElementById('mobileMenu').classList.remove('active');
                }
            });
        });

        // Mobile Menu Toggle
        document.getElementById('mobileMenuButton').addEventListener('click', () => {
            document.getElementById('mobileMenu').classList.toggle('active');
        });

        // Back to Top Button
        window.onscroll = function() {
            const backToTopBtn = document.getElementById('backToTopBtn');
            if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                backToTopBtn.style.display = "block";
            } else {
                backToTopBtn.style.display = "none";
            }
        };

        document.getElementById('backToTopBtn').addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Global Search Function
        function globalSearch() {
            const query = document.getElementById('globalSearch').value.trim();
            if (query) {
                alert(`Searching for: ${query}\n\nThis feature will be implemented in the next update.`);
                // In a real implementation, this would filter content based on the query
            }
        }

        // Countdown Timer
        function updateCountdown() {
            const examDate = new Date('2025-12-01T09:00:00'); // A/L exam start date
            const now = new Date();
            const diff = examDate - now;

            if (diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');

                // Update progress circles
                const totalDays = 365; // Approximate days in a year
                const dayPercentage = (days / totalDays) * 100;
                const hourPercentage = (hours / 24) * 100;
                const minutePercentage = (minutes / 60) * 100;
                const secondPercentage = (seconds / 60) * 100;

                document.querySelectorAll('.circle circle').forEach((circle, index) => {
                    let percentage;
                    switch(index) {
                        case 0: percentage = dayPercentage; break;
                        case 1: percentage = hourPercentage; break;
                        case 2: percentage = minutePercentage; break;
                        case 3: percentage = secondPercentage; break;
                    }
                    const circumference = 2 * Math.PI * 45;
                    const offset = circumference - (percentage / 100) * circumference;
                    circle.style.strokeDashoffset = offset;
                });
            } else {
                document.querySelector('.countdown-container').innerHTML = '<h3 class="text-2xl font-bold text-green-600">The 2025 A/L Examination has started!</h3>';
            }
        }

        // Initialize countdown
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Stream Selection for Past Papers
        document.querySelectorAll('.stream-card').forEach(card => {
            card.addEventListener('click', function() {
                // Remove active class from all cards
                document.querySelectorAll('.stream-card').forEach(c => {
                    c.classList.remove('active');
                });
                
                // Add active class to clicked card
                this.classList.add('active');
                
                const stream = this.getAttribute('data-stream');
                loadSubjects(stream);
            });
        });

        // Load Subjects based on Stream
        function loadSubjects(stream) {
            const subjects = {
                'science': ['Physics', 'Chemistry', 'Biology', 'Combined Mathematics', 'Agricultural Science', 'ICT'],
                'commerce': ['Business Studies', 'Accounting', 'Economics', 'Business Statistics'],
                'arts': ['Sinhala', 'English', 'History', 'Geography', 'Political Science', 'Buddhism', 'Logic'],
                'technology': ['Engineering Technology', 'Bio Systems Technology', 'Science for Technology'],
                'general': ['General English', 'General Tamil', 'Communication & Media Studies']
            };

            const subjectList = document.getElementById('subjectList');
            subjectList.innerHTML = '';
            
            if (subjects[stream]) {
                subjectList.classList.add('open');
                
                subjects[stream].forEach(subject => {
                    const subjectElement = document.createElement('div');
                    subjectElement.className = 'paper-item bg-gray-100 p-4 rounded-lg mb-2 cursor-pointer';
                    subjectElement.textContent = subject;
                    subjectElement.addEventListener('click', function() {
                        loadYears(stream, subject);
                    });
                    subjectList.appendChild(subjectElement);
                });
            } else {
                subjectList.classList.remove('open');
            }
            
            // Clear year and paper lists
            document.getElementById('yearList').innerHTML = '';
            document.getElementById('paperList').innerHTML = '';
        }

        // Load Years based on Subject
        function loadYears(stream, subject) {
            const years = [2023, 2022, 2021, 2020, 2019];
            const yearList = document.getElementById('yearList');
            yearList.innerHTML = '';
            
            years.forEach(year => {
                const yearElement = document.createElement('button');
                yearElement.className = 'bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-medium transition-colors btn-animate';
                yearElement.textContent = year;
                yearElement.addEventListener('click', function() {
                    loadPapers(stream, subject, year);
                });
                yearList.appendChild(yearElement);
            });
            
            // Clear paper list
            document.getElementById('paperList').innerHTML = '';
        }

        // Load Papers based on Year
        function loadPapers(stream, subject, year) {
            const papers = [
                { name: 'Question Paper', url: '#' },
                { name: 'Marking Scheme', url: '#' },
                { name: 'Answer Guide', url: '#' }
            ];
            
            const paperList = document.getElementById('paperList');
            paperList.innerHTML = `<h3 class="text-xl font-semibold text-gray-800 mb-4">${subject} - ${year}</h3>`;
            
            papers.forEach(paper => {
                const paperElement = document.createElement('div');
                paperElement.className = 'flex justify-between items-center bg-gray-50 p-4 rounded-lg mb-2';
                paperElement.innerHTML = `
                    <span class="text-gray-800">${paper.name}</span>
                    <a href="${paper.url}" class="bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded-lg font-medium transition-colors text-sm btn-animate">
                        <i class="fas fa-download mr-1"></i> Download
                    </a>
                `;
                paperList.appendChild(paperElement);
            });
        }

        // Check Results Function
        function checkResults() {
            const examType = document.getElementById('examType').value;
            const examYear = document.getElementById('examYear').value;
            const indexNumber = document.getElementById('indexNumber').value.trim();
            const nicNumber = document.getElementById('nicNumber').value.trim();
            
            if (!examType || !examYear || !indexNumber || !nicNumber) {
                alert('Please fill in all fields.');
                return;
            }
            
            // Simulate API call
            document.getElementById('resultsDisplay').innerHTML = `
                <div class="bg-blue-50 p-4 rounded-lg">
                    <p class="text-blue-800">Checking results for Index Number: ${indexNumber}, NIC: ${nicNumber}...</p>
                </div>
            `;
            
            setTimeout(() => {
                document.getElementById('resultsDisplay').innerHTML = `
                    <div class="bg-green-50 p-6 rounded-lg">
                        <h4 class="text-xl font-semibold text-green-800 mb-4">Results Found!</h4>
                        <div class="space-y-2">
                            <p><span class="font-medium">Exam:</span> ${examType.toUpperCase()} ${examYear}</p>
                            <p><span class="font-medium">Index Number:</span> ${indexNumber}</p>
                            <p><span class="font-medium">Name:</span> John Doe</p>
                            <p><span class="font-medium">School:</span> Example College</p>
                            <p><span class="font-medium">Results:</span> 
                                <span class="font-semibold text-green-700">Passed with 3 A's</span>
                            </p>
                        </div>
                        <button onclick="printResults()" class="mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors btn-animate">
                            <i class="fas fa-print mr-2"></i> Print Results
                        </button>
                    </div>
                `;
            }, 2000);
        }

        // Print Results Function
        function printResults() {
            window.print();
        }

        // Contact Form Submission
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            // Simulate sending message
            alert(`Thank you, ${name}! Your message has been sent. We'll get back to you at ${email} soon.`);
            
            // Reset form
            this.reset();
        });

        // Initialize Timetable
        function initializeTimetable() {
            const timetableData = [
                { date: '2025-12-01', subject: 'Physics - Paper I', stream: 'science', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-02', subject: 'Chemistry - Paper I', stream: 'science', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-03', subject: 'Biology - Paper I', stream: 'science', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-04', subject: 'Combined Mathematics - Paper I', stream: 'science', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-05', subject: 'Business Studies - Paper I', stream: 'commerce', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-08', subject: 'Accounting - Paper I', stream: 'commerce', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-09', subject: 'Economics - Paper I', stream: 'commerce', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-10', subject: 'Sinhala - Paper I', stream: 'arts', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-11', subject: 'English - Paper I', stream: 'arts', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-12', subject: 'History - Paper I', stream: 'arts', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-15', subject: 'Engineering Technology - Paper I', stream: 'technology', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-16', subject: 'General English - Paper I', stream: 'general', time: '9:00 AM - 12:00 PM' }
            ];

            const calendar = document.getElementById('timetableCalendar');
            calendar.innerHTML = '';

            // Create calendar days for December 2025
            const daysInMonth = 31;
            for (let i = 1; i <= daysInMonth; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.innerHTML = `
                    <div class="text-sm">Dec ${i}</div>
                    <div class="text-2xl">${i}</div>
                `;

                // Check if this day has exams
                const dateStr = `2025-12-${i.toString().padStart(2, '0')}`;
                const dayExams = timetableData.filter(exam => exam.date === dateStr);

                if (dayExams.length > 0) {
                    dayElement.classList.add('exam-day', `${dayExams[0].stream}-stream`);
                    dayElement.setAttribute('data-date', dateStr);
                    dayElement.addEventListener('click', function() {
                        showExamDetails(dateStr, dayExams);
                    });
                }

                calendar.appendChild(dayElement);
            }
        }

        // Show Exam Details
        function showExamDetails(date, exams) {
            const title = document.getElementById('timetableDayTitle');
            const detailsList = document.getElementById('examDetailsList');
            
            title.textContent = `Exams on ${formatDate(date)}`;
            detailsList.innerHTML = '';
            
            exams.forEach(exam => {
                const examElement = document.createElement('div');
                examElement.className = 'bg-gray-50 p-4 rounded-lg';
                examElement.innerHTML = `
                    <h5 class="font-semibold text-gray-800">${exam.subject}</h5>
                    <p class="text-gray-600">Time: ${exam.time}</p>
                    <p class="text-gray-600">Stream: ${exam.stream.charAt(0).toUpperCase() + exam.stream.slice(1)}</p>
                `;
                detailsList.appendChild(examElement);
            });
            
            // Add animation
            detailsList.parentElement.classList.add('exam-details', 'open');
        }

        // Format date as "December 1, 2025"
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
        }

        // Copy Timetable to Clipboard
        function copyTimetableToClipboard() {
            const timetableText = generateTimetableText();
            navigator.clipboard.writeText(timetableText).then(() => {
                alert('Timetable copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        // Download Timetable as Text
        function downloadTimetableAsText() {
            const timetableText = generateTimetableText();
            const blob = new Blob([timetableText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '2025-AL-Timetable.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Generate Timetable Text
        function generateTimetableText() {
            let text = '2025 G.C.E. Advanced Level Examination Timetable\n\n';
            text += 'Date\t\tSubject\t\t\tTime\t\tStream\n';
            text += '------------------------------------------------------------\n';
            
            const timetableData = [
                { date: '2025-12-01', subject: 'Physics - Paper I', stream: 'science', time: '9:00 AM - 12:00 PM' },
                { date: '2025-12-02', subject: 'Chemistry - Paper I', stream: 'science', time: '9:00 AM - 12:00 PM' },
                // Add more exam entries here
            ];
            
            timetableData.forEach(exam => {
                text += `${formatDate(exam.date)}\t${exam.subject}\t${exam.time}\t${exam.stream}\n`;
            });
            
            return text;
        }

        // Load Notices
        function loadNotices() {
            const notices = [
                { title: '2025 A/L Examination Schedule Released', date: '2025-08-10', content: 'The Department of Examinations has released the official schedule for the 2025 G.C.E. Advanced Level examination.' },
                { title: 'New Past Papers Added', date: '2025-08-05', content: 'We have added past papers for the years 2020-2023 for all streams. Check the Past Papers section for details.' },
                { title: 'Website Maintenance', date: '2025-07-28', content: 'The website will be undergoing maintenance on 2025-08-15 from 2:00 AM to 4:00 AM. There might be temporary unavailability during this period.' }
            ];
            
            const noticesList = document.getElementById('noticesList');
            noticesList.innerHTML = '';
            
            notices.forEach(notice => {
                const noticeElement = document.createElement('div');
                noticeElement.className = 'notice-item bg-gray-50 p-4 rounded-lg';
                noticeElement.innerHTML = `
                    <h4 class="font-semibold text-gray-800">${notice.title}</h4>
                    <p class="text-gray-600 text-sm mb-2">Posted on: ${notice.date}</p>
                    <p class="text-gray-700">${notice.content}</p>
                `;
                noticesList.appendChild(noticeElement);
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializeTimetable();
            loadNotices();
            
            // Set first stream card as active by default
            document.querySelector('.stream-card').click();
        });

        // Search functionality for timetable
        document.getElementById('timetableSearch').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const calendarDays = document.querySelectorAll('.calendar-day');
            
            calendarDays.forEach(day => {
                const date = day.getAttribute('data-date');
                if (date) {
                    // In a real implementation, we would check if this date has exams matching the search term
                    // For now, we'll just highlight days when searching
                    if (searchTerm === '') {
                        day.style.opacity = '1';
                    } else {
                        day.style.opacity = '0.3';
                    }
                }
            });
        });
    </script>
</body>
</html>